server {
    listen 5000 default_server;
    server_name _;
    server_name_in_redirect off;
    access_log  /var/log/nginx/access.log;
    error_log  /var/log/nginx/error.log debug;
    location /admin/api {
        proxy_pass ${HOST_NAME}/admin/api;
        proxy_set_header Origin ${HOST_NAME};
        proxy_set_header Cookie "GCP_IAP_UID=112159048697629340533; _hjid=7b7fad23-810b-4c1d-a8bf-3075f1765041; GCP_IAP_XSRF_NONCE__8Balbzpskt12oYmWctosw=1; GCP_IAAP_AUTH_TOKEN_5D62D4D9F950FF2D=eyJhbGciOiJSUzI1NiIsImtpZCI6Ijc0MjE3YjhkYWRiYjM2NTc4MzU4MGY5ZTkyNDg3ZDcwMWNkMzhmZTYiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20iLCJhenAiOiIxMzUwMzIxOTU1Njctb2Vkb2s1b2JhMmEzaXByN3ZidWhvMDJqOGowZW45cDQuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJhdWQiOiIxMzUwMzIxOTU1Njctb2Vkb2s1b2JhMmEzaXByN3ZidWhvMDJqOGowZW45cDQuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJzdWIiOiIxMTIxNTkwNDg2OTc2MjkzNDA1MzMiLCJoZCI6ImRpc3RpY2hhaW4uY29tIiwiZW1haWwiOiJ0dWFuQGRpc3RpY2hhaW4uY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImF0X2hhc2giOiJEQjF5Z2VxMUVXcEQ5NnVrSzYzRkV3IiwiZ29vZ2xlIjp7ImdpYyI6IkFHT281MmlTMTdqVG5ISG1NWUFHTE42emY3OVNrVXd6d1Y2N3JvMFBORnk5YzhhX1p3RGNfOWZhQzQ4S1JTZExsdDRWanNrNUFCeHk5VzZ6N3BmOFN6dXQyXzAxa3JFY21MckU1ZDd4ZXJOVTV2bV8wc3dtaXBEbTdTLU05R2JpZ0NFTTFza0VqeWt3SXY2M0Nja3Axbmc5THlzSTNxSGJFN2pnRUlpLWRQYU50VzRqSV9aX1haQW83cHJOTGVzc25oS05KaDRLd1ppNlRzUHJ1bHV5U2FjZXFsby1FTGlSbm9hd0tnIn0sImlhdCI6MTYzMTg2NjAyMCwiZXhwIjoxNjMxODY5NjIwfQ.mbYrcwe_2Xf1DA4GDF_RwtIvQ2SZfIeIdDerMEqduPzn3z-6hYrPi7veiKMeuziKNFM9DVB3UtG9JrVcGYGW603SRkwl8AfVHmgEWj3rK7maAHiJj0vdId26FndtzATZt5FMceO9jLtm8hPdOg1uYzAtFtWEXk6RAHKCgxlDWt8qTxsDPWB6ks8O81hKzaVf9imVAT82_kNc1cESae66r9SGnF0yVn3bCeFVKZcYb1QirXqLGh76eh4dSdTcZcuFbWnsDARaKFL9xp1ZF3fPgUkldqjfySi7nLMP5QV9igi0Yp9G05lc1mCd2-Fy7SPuPWW8NIs-qYeIBiK8wnJ4lw; _hjIncludedInPageviewSample=1; _hjAbsoluteSessionInProgress=0";
        proxy_hide_header Access-Control-Allow-Origin;
        add_header Access-Control-Allow-Origin $http_origin;

        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "Upgrade";
        client_max_body_size 100M;
    }

    location / {
        proxy_pass http://host.docker.internal:3000;

        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "Upgrade";
    }
}

server {
    listen 5001;
    server_name _;
    server_name_in_redirect off;
    access_log  /var/log/nginx/access.log;
    error_log  /var/log/nginx/error.log debug;
    location /admin/api {
        proxy_pass https://dev.distichain.com/admin/api;
        proxy_set_header Origin https://dev.distichain.com;
        proxy_set_header Cookie "${COOKIE}";
        proxy_hide_header Access-Control-Allow-Origin;
        add_header Access-Control-Allow-Origin $http_origin;

        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "Upgrade";
        client_max_body_size 100M;
    }

    location / {
        proxy_pass http://host.docker.internal:3001;

        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "Upgrade";
    }
}

server {
    listen 5002;
    server_name _;
    server_name_in_redirect off;
    access_log  /var/log/nginx/access.log;
    error_log  /var/log/nginx/error.log debug;
    location /admin {
        proxy_pass https://services.distichain.dev/admin;
        proxy_set_header Origin https://services.distichain.dev;
        proxy_set_header Cookie "${COOKIE}";
        proxy_hide_header Access-Control-Allow-Origin;
        add_header Access-Control-Allow-Origin $http_origin;

        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "Upgrade";
        client_max_body_size 100M;
    }

    location / {
        proxy_pass http://host.docker.internal:3002;

        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "Upgrade";
    }
}